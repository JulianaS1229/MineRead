<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MineRead ‚Äì Alfabetiza√ß√£o em Blocos</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <style>
    /* =====================================================
        VARI√ÅVEIS & RESET
    ===================================================== */
    :root {
      --grass:    #5D8A3C;
      --grass-d:  #3E6B22;
      --dirt:     #8B5E3C;
      --dirt-d:   #6B3F1F;
      --stone:    #8C8C8C;
      --stone-d:  #5A5A5A;
      --wood:     #A0742A;
      --wood-d:   #7A531A;
      --diamond:  #4DD9E0;
      --gold:     #FFDA44;
      --sky:      #87CEEB;
      --night:    #1a2b4a;
      --white:    #F5F5F5;
      --red:      #C0392B;
      --green:    #27AE60;
      --pixel:    'Press Start 2P', monospace;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--pixel);
      background: var(--sky);
      min-height: 100vh;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
    }

    /* =====================================================
        FUNDO COM BLOCOS (parallax simples)
    ===================================================== */
    #bg {
      position: fixed; inset: 0; z-index: 0;
      background:
        linear-gradient(to bottom, #87CEEB 0%, #B0DFF8 55%, #5D8A3C 55%, #5D8A3C 62%, #8B5E3C 62%, #8B5E3C 100%);
    }
    #bg::after {
      content: '';
      position: absolute; inset: 0;
      background-image:
        linear-gradient(rgba(0,0,0,.06) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,0,0,.06) 1px, transparent 1px);
      background-size: 32px 32px;
    }
    .cloud {
      position: fixed; top: 12%; background: rgba(255,255,255,.85);
      border-radius: 4px; z-index: 1; animation: drift linear infinite;
    }
    @keyframes drift { from { transform: translateX(-200px); } to { transform: translateX(110vw); } }

    /* =====================================================
        WRAPPER PRINCIPAL
    ===================================================== */
    #app {
      position: relative; z-index: 2;
      display: flex; flex-direction: column; align-items: center;
      padding: 16px 8px 20px;
      flex: 1; /* Faz o app ocupar o espa√ßo e empurrar o footer */
    }

    /* =====================================================
        HEADER / HUD
    ===================================================== */
    header {
      width: 100%; max-width: 700px;
      display: flex; justify-content: space-between; align-items: center;
      background: rgba(0,0,0,.55);
      border: 3px solid #000;
      border-radius: 4px;
      padding: 10px 16px;
      margin-bottom: 18px;
      box-shadow: inset -3px -3px 0 rgba(255,255,255,.08), 3px 3px 0 #000;
    }
    header h1 { font-size: clamp(8px, 2.5vw, 14px); color: var(--grass); text-shadow: 2px 2px 0 #000; }
    #hud-diamonds {
      display: flex; align-items: center; gap: 6px;
      color: var(--diamond); font-size: clamp(7px, 2vw, 11px);
    }
    #hud-diamonds span.ico { font-size: clamp(14px, 3.5vw, 22px); }

    /* =====================================================
        √ÅREA DO JOGO
    ===================================================== */
    #game-area {
      width: 100%; max-width: 700px;
      background: rgba(0,0,0,.6);
      border: 4px solid #000;
      border-radius: 4px;
      padding: 22px 18px;
      box-shadow: 4px 4px 0 #000, inset -3px -3px 0 rgba(255,255,255,.06);
    }

    #mode-selector {
      display: flex; gap: 14px; justify-content: center; flex-wrap: wrap;
      margin-bottom: 22px;
    }

    /* =====================================================
        BOT√ïES ‚Äì estilo blocos
    ===================================================== */
    .btn {
      font-family: var(--pixel);
      font-size: clamp(6px, 2vw, 10px);
      color: var(--white);
      border: 3px solid #000;
      border-radius: 2px;
      cursor: pointer;
      padding: 10px 14px;
      position: relative;
      transition: transform .08s, filter .08s;
      text-shadow: 1px 1px 0 #000;
      line-height: 1.5;
    }
    .btn:active { transform: scale(.95); filter: brightness(.85); }

    .btn-wood   { background: var(--wood);  box-shadow: inset -3px -4px 0 var(--wood-d),  3px 3px 0 #000; }
    .btn-stone { background: var(--stone); box-shadow: inset -3px -4px 0 var(--stone-d), 3px 3px 0 #000; }
    .btn-grass { background: var(--grass); box-shadow: inset -3px -4px 0 var(--grass-d), 3px 3px 0 #000; }
    .btn-dirt  { background: var(--dirt);  box-shadow: inset -3px -4px 0 var(--dirt-d),  3px 3px 0 #000; }
    .btn-diamond { background: #217478; box-shadow: inset -3px -4px 0 #164f52, 3px 3px 0 #000; }

    .btn.selected { outline: 3px solid var(--gold); outline-offset: 2px; }

    #question-title {
      color: var(--white);
      font-size: clamp(7px, 2.2vw, 11px);
      text-align: center;
      margin-bottom: 16px;
      letter-spacing: 1px;
      text-shadow: 1px 1px 0 #000;
    }

    /* =====================================================
        ITEM DISPLAY (EMOJI)
    ===================================================== */
    #item-display { text-align: center; margin-bottom: 18px; }
    #item-emoji {
      font-size: clamp(56px, 14vw, 96px);
      display: inline-block;
      filter: drop-shadow(3px 3px 0 rgba(0,0,0,.6));
      animation: float 2.4s ease-in-out infinite;
    }
    @keyframes float {
      0%,100% { transform: translateY(0); }
      50%      { transform: translateY(-8px); }
    }
    #item-label {
      color: var(--gold);
      font-size: clamp(7px, 2vw, 10px);
      margin-top: 4px;
      text-shadow: 1px 1px 0 #000;
    }

    /* =====================================================
        S√çLABAS E PALAVRA
    ===================================================== */
    #word-built {
      display: flex; justify-content: center; flex-wrap: wrap; gap: 8px;
      min-height: 48px; margin-bottom: 18px; padding: 10px;
      background: rgba(0,0,0,.35); border: 2px solid #555; border-radius: 2px;
    }
    .syllable-slot {
      background: rgba(255,255,255,.08); border: 2px dashed #888;
      min-width: 48px; height: 42px; display: flex; align-items: center; justify-content: center;
      color: var(--white); font-family: var(--pixel); font-size: clamp(9px, 3vw, 14px); border-radius: 2px;
    }
    .syllable-slot.filled {
      background: var(--grass); border: 2px solid var(--grass-d);
      box-shadow: inset -2px -3px 0 var(--grass-d); cursor: pointer;
    }
    #syllable-blocks { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-bottom: 20px; }
    .syl-block {
      font-family: var(--pixel); font-size: clamp(9px, 3vw, 14px); color: var(--white);
      background: var(--wood); border: 3px solid #000; box-shadow: inset -3px -4px 0 var(--wood-d), 3px 3px 0 #000;
      border-radius: 2px; padding: 10px 14px; cursor: pointer; text-shadow: 1px 1px 0 #000; text-align: center;
    }
    .syl-block.used { opacity: .35; pointer-events: none; }

    #complete-word-display {
      text-align: center; color: var(--white); font-size: clamp(16px, 6vw, 36px);
      letter-spacing: 4px; text-shadow: 2px 2px 0 #000; margin-bottom: 20px;
    }
    #complete-word-display .blank { color: var(--gold); border-bottom: 3px solid var(--gold); min-width: 30px; display: inline-block; }
    #complete-options { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-bottom: 20px; }

    #feedback { text-align: center; font-size: clamp(8px, 2.5vw, 13px); min-height: 26px; margin-bottom: 14px; }
    #feedback.ok  { color: #4eff91; text-shadow: 0 0 8px #4eff91; }
    #feedback.err { color: #ff4f4f; text-shadow: 0 0 8px #ff4f4f; }

    #action-btn { margin: 0 auto; display: block; min-width: 180px; }

    /* =====================================================
        LEVEL UP & PROGRESSO
    ===================================================== */
    #levelup-overlay {
      display: none; position: fixed; inset: 0; z-index: 100; background: rgba(0,0,0,.75);
      justify-content: center; align-items: center; flex-direction: column; gap: 18px;
    }
    #levelup-overlay.show { display: flex; animation: popIn .4s ease; }
    #progress-bar-wrap { width: 100%; max-width: 700px; margin-bottom: 14px; background: rgba(0,0,0,.4); border: 2px solid #000; height: 18px; overflow: hidden; }
    #progress-bar { height: 100%; background: linear-gradient(90deg, var(--diamond), #1fc8cf); width: 0%; transition: width .4s ease; }

    /* =====================================================
        FOOTER PERSONALIZADO (NOVO)
    ===================================================== */
    .game-footer {
      position: relative;
      z-index: 2;
      width: 100%;
      text-align: center;
      padding: 20px 10px;
      background: rgba(0, 0, 0, 0.4);
      border-top: 3px solid #000;
      margin-top: auto; /* Garante que o footer fique no final */
    }

    .footer-text {
      color: var(--white);
      font-size: clamp(6px, 1.8vw, 9px); /* Tamanho pequeno estilo Minecraft */
      text-shadow: 1px 1px 0 #000;
      letter-spacing: 1px;
    }

    .footer-text span {
      color: var(--gold); /* Nome em dourado para destaque */
    }

    /* =====================================================
        ANIMA√á√ïES
    ===================================================== */
    @keyframes popIn { from { transform: scale(.5); opacity:0; } to { transform: scale(1); opacity:1; } }
    @keyframes drift { from { transform: translateX(-200px); } to { transform: translateX(110vw); } }
    .diamond-fly { position: fixed; pointer-events: none; z-index: 200; font-size: 28px; animation: flyUp .9s ease forwards; }
    @keyframes flyUp { 0% { opacity:1; transform: translateY(0); } 100% { opacity:0; transform: translateY(-90px) scale(1.6); } }

    @media (max-width: 480px) {
      header { flex-direction: column; gap: 8px; text-align: center; }
      #mode-selector { gap: 8px; }
    }
  </style>
</head>
<body>

<div id="bg"></div>

<div id="app">
  <header>
    <h1>‚õè MineRead</h1>
    <div id="hud-diamonds">
      <span class="ico">üíé</span>
      <span id="diamond-count">0</span> DIAMANTES
    </div>
  </header>

  <div id="progress-bar-wrap">
    <div id="progress-bar"></div>
  </div>

  <div id="game-area">
    <div id="mode-selector">
      <button class="btn btn-grass" id="btn-syllable" onclick="setMode('syllable')">üß© S√≠labas</button>
      <button class="btn btn-stone" id="btn-complete" onclick="setMode('complete')">üî§ Complete</button>
    </div>

    <div id="question-title">Escolha um modo para jogar!</div>

    <div id="item-display" style="display:none">
      <div id="item-emoji"></div>
      <div id="item-label"></div>
    </div>

    <div id="syllable-mode" style="display:none">
      <div id="word-built"></div>
      <div id="syllable-blocks"></div>
    </div>

    <div id="complete-mode" style="display:none">
      <div id="complete-word-display"></div>
      <div id="complete-options"></div>
    </div>

    <div id="feedback"></div>

    <button class="btn btn-diamond" id="action-btn" style="display:none">
      ‚úÖ CONFIRMAR
    </button>
  </div>
</div>

<footer class="game-footer">
  <p class="footer-text">@ Desenvolvido por <span>Juliana de Souza</span></p>
</footer>

<div id="levelup-overlay">
  <div class="big-emoji">üíé</div>
  <h2>LEVEL UP!<br>+5 DIAMANTES!</h2>
  <button class="btn btn-grass" onclick="closeLevelUp()">‚ñ∂ CONTINUAR</button>
</div>

<script>
// O BANCO DE PALAVRAS E A L√ìGICA CONTINUAM EXATAMENTE IGUAIS
const WORDS = [
  { word:'PICARETA', syllables:['PI','CA','RE','TA'], emoji:'‚õè', label:'Picareta', hint:'PI__RETA', answer:'CA', options:['CA','BU','SO','ME'] },
  { word:'ESPADA', syllables:['ES','PA','DA'], emoji:'‚öîÔ∏è', label:'Espada', hint:'ES__DA', answer:'PA', options:['PA','LE','TA','MI'] },
  { word:'PORCO', syllables:['POR','CO'], emoji:'üê∑', label:'Porco', hint:'POR__', answer:'CO', options:['CO','DA','FI','TE'] },
  { word:'CASA', syllables:['CA','SA'], emoji:'üè†', label:'Casa', hint:'CA__', answer:'SA', options:['SA','PI','RE','BO'] },
  { word:'PEDRA', syllables:['PE','DRA'], emoji:'ü™®', label:'Pedra', hint:'PE__A', answer:'DR', options:['DR','SA','NE','BI'] },
  { word:'FLECHA', syllables:['FLE','CHA'], emoji:'üèπ', label:'Flecha', hint:'FLE__A', answer:'CH', options:['CH','PI','TA','DA'] },
  { word:'BLOCO', syllables:['BLO','CO'], emoji:'üü´', label:'Bloco', hint:'BLO__', answer:'CO', options:['CO','DA','ME','SA'] },
  { word:'MONSTRO', syllables:['MONS','TRO'], emoji:'üëæ', label:'Monstro', hint:'MONS__O', answer:'TR', options:['TR','PI','SO','CA'] },
  { word:'DIAMANTE', syllables:['DI','A','MAN','TE'], emoji:'üíé', label:'Diamante', hint:'DIA__ANTE', answer:'M', options:['M','P','T','B'] },
  { word:'TOCHA', syllables:['TO','CHA'], emoji:'üî¶', label:'Tocha', hint:'TO__A', answer:'CH', options:['CH','RA','BO','NE'] },
  { word:'BARCO', syllables:['BAR','CO'], emoji:'‚õµ', label:'Barco', hint:'BAR__', answer:'CO', options:['CO','TA','MI','LE'] },
  { word:'LOBO', syllables:['LO','BO'], emoji:'üê∫', label:'Lobo', hint:'LO__', answer:'BO', options:['BO','CA','NA','PI'] },
  { word:'COFRE', syllables:['CO','FRE'], emoji:'üì¶', label:'Cofre', hint:'CO__E', answer:'FR', options:['FR','TA','SA','BE'] },
  { word:'VACA', syllables:['VA','CA'], emoji:'üêÑ', label:'Vaca', hint:'VA__', answer:'CA', options:['CA','PE','BI','TO'] },
  { word:'OVELHA', syllables:['O','VE','LHA'], emoji:'üêë', label:'Ovelha', hint:'OVE__A', answer:'LH', options:['LH','NE','PI','TA'] },
];

let state = { mode: null, diamonds: 0, currentWord: null, builtSyllables: [], selectedOption: null, usedIndices: [] };

function loadSave() {
  const saved = localStorage.getItem('mineread_diamonds');
  if (saved !== null) state.diamonds = parseInt(saved) || 0;
  updateHUD();
}
function saveDiamonds() { localStorage.setItem('mineread_diamonds', state.diamonds); }
function updateHUD() {
  document.getElementById('diamond-count').textContent = state.diamonds;
  const prog = (state.diamonds % 5) / 5 * 100;
  document.getElementById('progress-bar').style.width = prog + '%';
}

function setMode(mode) {
  state.mode = mode;
  document.getElementById('syllable-mode').style.display = mode === 'syllable' ? '' : 'none';
  document.getElementById('complete-mode').style.display = mode === 'complete' ? '' : 'none';
  document.getElementById('item-display').style.display = '';
  document.getElementById('action-btn').style.display = '';
  document.getElementById('btn-syllable').classList.toggle('selected', mode==='syllable');
  document.getElementById('btn-complete').classList.toggle('selected', mode==='complete');
  loadNewChallenge();
}

function loadNewChallenge() {
  clearFeedback();
  let idx;
  do { idx = Math.floor(Math.random() * WORDS.length); }
  while (state.usedIndices.includes(idx) && state.usedIndices.length < WORDS.length);
  state.usedIndices.push(idx);
  if (state.usedIndices.length > 4) state.usedIndices.shift();

  state.currentWord = WORDS[idx];
  state.builtSyllables = [];
  state.selectedOption = null;
  document.getElementById('item-emoji').textContent = state.currentWord.emoji;
  document.getElementById('item-label').textContent = state.currentWord.label;
  if (state.mode === 'syllable') loadSyllableChallenge(); else loadCompleteChallenge();
  updateActionBtn();
}

function loadSyllableChallenge() {
  document.getElementById('question-title').textContent = 'Monte a palavra clicando nas s√≠labas!';
  const built = document.getElementById('word-built'); built.innerHTML = '';
  state.currentWord.syllables.forEach((_, i) => {
    const slot = document.createElement('div'); slot.className = 'syllable-slot'; slot.id = 'slot-' + i; built.appendChild(slot);
  });
  const shuffled = [...state.currentWord.syllables].sort(() => Math.random() - .5);
  const blocksDiv = document.getElementById('syllable-blocks'); blocksDiv.innerHTML = '';
  shuffled.forEach((syl, i) => {
    const btn = document.createElement('button'); btn.className = 'syl-block'; btn.textContent = syl; btn.dataset.syl = syl; btn.id = 'sylbtn-' + i; btn.onclick = () => clickSyllable(btn); blocksDiv.appendChild(btn);
  });
}

function clickSyllable(btn) {
  if (btn.classList.contains('used')) return;
  const nextIdx = state.builtSyllables.length;
  if (nextIdx >= state.currentWord.syllables.length) return;
  state.builtSyllables.push({ syl: btn.dataset.syl, btnId: btn.id });
  btn.classList.add('used');
  const slot = document.getElementById('slot-' + nextIdx); slot.textContent = btn.dataset.syl; slot.classList.add('filled'); slot.onclick = () => removeSyllable(nextIdx);
  clearFeedback(); updateActionBtn();
}

function removeSyllable(idx) {
  const removed = state.builtSyllables.splice(idx);
  removed.forEach(r => document.getElementById(r.btnId).classList.remove('used'));
  for (let i = idx; i < state.currentWord.syllables.length; i++) {
    const slot = document.getElementById('slot-' + i); slot.textContent = ''; slot.classList.remove('filled'); slot.onclick = null;
  }
  clearFeedback(); updateActionBtn();
}

function loadCompleteChallenge() {
  document.getElementById('question-title').textContent = 'Escolha a s√≠laba que completa a palavra!';
  const display = document.getElementById('complete-word-display');
  const parts = state.currentWord.hint.split('__');
  display.innerHTML = parts[0] + '<span class="blank">&nbsp;&nbsp;&nbsp;</span>' + (parts[1] || '');
  const opts = [...state.currentWord.options].sort(() => Math.random() - .5);
  const container = document.getElementById('complete-options'); container.innerHTML = '';
  opts.forEach(opt => {
    const btn = document.createElement('button'); btn.className = 'btn btn-stone'; btn.textContent = opt; btn.onclick = () => selectOption(opt, btn); container.appendChild(btn);
  });
}

function selectOption(opt, btn) {
  document.querySelectorAll('#complete-options .btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected'); state.selectedOption = opt; clearFeedback(); updateActionBtn();
}

function updateActionBtn() {
  const btn = document.getElementById('action-btn');
  if (state.mode === 'syllable') {
    const complete = state.builtSyllables.length === state.currentWord.syllables.length;
    btn.textContent = complete ? '‚úÖ CONFIRMAR' : '‚¨Ö DESFAZER';
    btn.className = 'btn ' + (complete ? 'btn-diamond' : 'btn-dirt');
    btn.onclick = complete ? checkSyllable : undoLast;
  } else {
    const ready = state.selectedOption !== null;
    btn.textContent = ready ? '‚úÖ CONFIRMAR' : 'üëÜ ESCOLHA';
    btn.className = 'btn ' + (ready ? 'btn-diamond' : 'btn-stone');
    btn.onclick = ready ? checkComplete : null;
  }
}

function undoLast() { if (state.builtSyllables.length > 0) removeSyllable(state.builtSyllables.length - 1); }

function checkSyllable() { if (state.builtSyllables.map(s => s.syl).join('') === state.currentWord.word) onCorrect(); else onWrong(); }
function checkComplete() { if (state.selectedOption === state.currentWord.answer) onCorrect(); else onWrong(); }

function onCorrect() {
  showFeedback('‚úÖ MUITO BEM! +1 üíé', 'ok');
  playSound('correct'); state.diamonds++; saveDiamonds(); updateHUD(); spawnDiamond();
  const action = document.getElementById('action-btn');
  action.textContent = '‚ñ∂ PR√ìXIMO'; action.className = 'btn btn-grass'; action.onclick = loadNewChallenge;
  if (state.diamonds % 5 === 0) setTimeout(showLevelUp, 700);
}

function onWrong() {
  showFeedback('‚ùå TENTE NOVAMENTE!', 'err'); playSound('wrong');
  const ga = document.getElementById('game-area'); ga.style.animation = 'shake .4s ease';
  ga.addEventListener('animationend', () => ga.style.animation = '', { once: true });
}

function showFeedback(msg, cls) { const el = document.getElementById('feedback'); el.textContent = msg; el.className = cls; }
function clearFeedback() { const el = document.getElementById('feedback'); el.textContent = ''; el.className = ''; }

function showLevelUp() { document.getElementById('levelup-overlay').classList.add('show'); playSound('levelup'); }
function closeLevelUp() { document.getElementById('levelup-overlay').classList.remove('show'); loadNewChallenge(); }

function spawnDiamond() {
  const el = document.createElement('div'); el.className = 'diamond-fly'; el.textContent = 'üíé';
  el.style.left = (30 + Math.random() * 40) + 'vw'; el.style.top = '50vh';
  document.body.appendChild(el); setTimeout(() => el.remove(), 950);
}

// SONS E DECORA√á√ÉO
const AudioCtx = window.AudioContext || window.webkitAudioContext;
let audioCtx;
function getCtx() { if (!audioCtx) audioCtx = new AudioCtx(); return audioCtx; }
function playSound(type) {
  try {
    const ctx = getCtx(); const osc = ctx.createOscillator(); const gain = ctx.createGain();
    osc.connect(gain); gain.connect(ctx.destination);
    if (type === 'correct') {
      osc.type = 'square'; osc.frequency.setValueAtTime(440, ctx.currentTime); osc.frequency.setValueAtTime(880, ctx.currentTime + .2);
      gain.gain.setValueAtTime(.1, ctx.currentTime); osc.start(); osc.stop(ctx.currentTime + .3);
    } else if (type === 'wrong') {
      osc.type = 'sawtooth'; osc.frequency.setValueAtTime(150, ctx.currentTime);
      gain.gain.setValueAtTime(.1, ctx.currentTime); osc.start(); osc.stop(ctx.currentTime + .3);
    } else if (type === 'levelup') {
      [523, 659, 784, 1047].forEach((f, i) => {
        const o = ctx.createOscillator(); const g = ctx.createGain(); o.connect(g); g.connect(ctx.destination);
        o.type = 'square'; o.frequency.value = f; g.gain.setValueAtTime(.1, ctx.currentTime + i*.1);
        o.start(ctx.currentTime + i*.1); o.stop(ctx.currentTime + i*.1 + .2);
      });
    }
  } catch(e){}
}

function createClouds() {
  [60,90,50,80].forEach((w, i) => {
    const c = document.createElement('div'); c.className = 'cloud';
    c.style.width = w + 'px'; c.style.height = w*.4 + 'px'; c.style.top = (8 + i*6) + '%';
    c.style.animationDuration = (20 + i*5) + 's'; document.body.appendChild(c);
  });
}

const shakeStyle = document.createElement('style');
shakeStyle.textContent = `@keyframes shake { 0%,100% { transform:translateX(0); } 20%,60% { transform:translateX(-5px); } 40%,80% { transform:translateX(5px); } }`;
document.head.appendChild(shakeStyle);

window.addEventListener('DOMContentLoaded', () => { createClouds(); loadSave(); });
</script>
</body>
</html>